<!--Cian Hogan, Web Development Project Home Page -->
<!--Charts Page generates data visualizations  -->
<!--Pulls content from CSV using d3js and also uses array variable--> 

<!DOCTYPE html>
<html>
    <head>
        <title>Cian Hogan | Charts</title>
        <!-- Links to external CSS and Javascript -->
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <style type="text/css"></style>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="loginScript.js"></script>
        <script src="dataVisScript.js"></script>
    </head>
    <!-- Checks if user logged in on load of page --> 
    <body onload="checkStorage()">
        <!-- Header has 1 image, 3 links and login button -->
        <header id='header'>
            <img src="../images/logo1.webp" alt="Cian Hogan logo" height="256">
            <a class="header" id="home"  href="home.html">Home</a>
            <a class="header" id="page2" href="dom_page.html">Modules</a>
             <!-- BGC changed to highligh which page user is on -->
            <a class="header" style="color: RGBA(245,238,238,1);background-color: RGBA(99,131,170,1);" id="page3" href="data_vis.html">Charts</a>
            <button class="header" id="login" class="open-button" onclick="openForm()">Login</button>
        <!-- logUser button hidden until user logs in -->
            <button class="header" id="logUser" class="open-button" onmouseover="logOutHoverIn()" 
            onmouseout="logOutHoverOut()" onclick="logOutUser()"style="display:none"></button>
   </header>
<!-- Login form only shows if user clicks to login -->
<!-- Calls funciton on submit, validates email and all fields required --> 
   <div class="form-container">
        <form style="display:none" id="loginFormID" onsubmit="loginForm()">
            <h1>Login</h1>

            <label  for="name"><b>Name</b></label>
            <input id="entName" type="text" placeholder="Enter Name" name="name" required="required">

            <label  for="email"><b>Email</b></label>
            <input id="entEmail" type="email" placeholder="Enter Email" name="email" required="required">

            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="psw" required="required">

            <button type="submit" class="btn" style="width:75%">Login</button>
            <!-- Close button closes form, does not submit info-->
            <button type="button" class="btn cancel" style="width:75%" onclick="closeForm()">Close</button>
        </form>
    </div>
    <!-- Top Box contains title and image-->
        <div id="top">
                <div id="top-box">
                <h1>CIAN HOGAN</h1>
                <h2>GMIT Higher Diploma <br>in Data Analytics 2021</h2>
                <h2>Web Applications Development<br>Module Project</h2>
                </div>
            </div>
        <!-- drop down to allow user to select size, color and transition effect-->
         <div class="mini-dropdown">
            <h2>Size :<select class="mini-dropdown" id="sizeInput">
                <option value=800>800</option><option value=400>400</option></select></h2>
            <h2>Transition :<select class="mini-dropdown" id="transitionInput">
                <option value=1000>On</option><option value=0>Off</option></select></h2>
            <h2>Style :<select class="mini-dropdown" id="styleInput">
                <option value="light">Normal</option><option value="dark">Dark</option></select></h2></div>
        <div>
        <!-- User selects which chart to generate using dropdown-->
        <!-- When changed calls chage funciton below-->
            <select class="dropdown" name="Choose Chart" id="chart-choice" onchange='changeDropdown()'>
                <option value="popUKI">Population UK and Ireland</option>
                <option value="houseUKI">House Prices UK and Ireland</option>
            </select>
        <!-- Years option shows by default hidden if 1st dropdown changes-->
            <div id="pickYears">
            <select class="dropdown" name="Years" id="years">
                <option value="2020">2020</option>
                <option value="2016">2016</option>
                <option value="2011">2011</option>
                <option value="2006">2006</option>
                <option value="1996">1996</option>
            </select>
            <!-- calls population chart function when clicked-->
            <button onclick="populationChart()">Generate Chart</button></div>
        <!-- Country choice hidden by default shows if user changes 1st dropdown-->
       
            <div style="display:none" id="countryDiv">
            <select class="dropdown" id="pickCountry" name="Years" >
                <option value="all">All</option>
                <option value="Ireland">Ireland</option>
                <option value="England">England</option>
                <option value="Scotland">Scotland</option>
                <option value="Wales">Wales</option>
                <option value="Northern Ireland">Northern Ireland</option>
            </select>
        <!-- calls house price chart function when clicked-->
            <button onclick="housePriceChart()">Generate Chart</button></div>
        </div><br>
        
        <h2 id="chartTitleDiv" style="display: none"></h2>
        
        <div id="myDiv"></div>

        <script>
    // function to hide/display different dropdowns
            function changeDropdown(){
        // variable stores user input from first drop down
                var chartChoice = document.getElementById("chart-choice").value;
        // displays different 2nd dropdown depending on the input in the first
                if (chartChoice == "houseUKI"){
                document.getElementById("pickYears").style.display = 'none';
                document.getElementById("countryDiv").style.display = 'inline';
                }
                else{
                    document.getElementById("countryDiv").style.display = "none";
                    document.getElementById("pickYears").style.display = "inline"
                }
            }            
            
        </script>
    </body>
</html>